---
import "../styles/global.css";
import logo from "../assets/logo jl.png";
import MouseGradient from "../components/ui/MouseGradient";
import ScrollProgress from "../components/ui/ScrollProgress";
import NoiseOverlay from "../components/ui/NoiseOverlay.astro";
---

<!doctype html>
<html lang="es" data-lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="color-scheme" content="dark" />
    <title>Jose Luis - Full-Stack</title>
    <meta
      name="description"
      content="Portfolio dark premium con enfoque en producto, ingenieria y narrativa visual."
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Newsreader:opsz,wght@6..72,400,500,600&family=Space+Grotesk:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>

  <body class="min-h-screen antialiased">
    <ScrollProgress client:load />
    <MouseGradient client:load />
    <NoiseOverlay />

    <header
      class="fixed top-0 left-0 right-0 z-30 opacity-0 -translate-y-2 pointer-events-none transition duration-500 ease-out"
      data-nav
    >
      <div class="mx-auto max-w-6xl px-6">
        <div class="mt-5 rounded-2xl border border-white/10 bg-black/40 backdrop-blur">
          <nav class="flex items-center justify-between px-4 py-3 md:px-6">
            <a href="#top" class="flex items-center gap-3 text-sm font-semibold tracking-[0.2em]">
              <img src={logo.src} alt="Logo Jose Luis" class="h-7 w-7 rounded-full" />
              <span>JOSE LUIS</span>
            </a>

            <div class="hidden items-center gap-6 text-xs uppercase tracking-[0.25em] text-zinc-400 md:flex">
              <a href="#about" class="transition hover:text-white">
                <span data-lang="es">Sobre</span>
                <span data-lang="en">About</span>
              </a>
              <a href="#profile" class="transition hover:text-white">
                <span data-lang="es">Perfil</span>
                <span data-lang="en">Profile</span>
              </a>
              <a href="#skills" class="transition hover:text-white">
                <span data-lang="es">Stack</span>
                <span data-lang="en">Skills</span>
              </a>
              <a href="#work" class="transition hover:text-white">
                <span data-lang="es">Trabajo</span>
                <span data-lang="en">Work</span>
              </a>
              <a href="#contact" class="transition hover:text-white">
                <span data-lang="es">Contacto</span>
                <span data-lang="en">Contact</span>
              </a>
            </div>

            <div class="flex items-center gap-3">
              <div class="flex items-center gap-2">
                <a
                  href="https://github.com/joselaguilarhz"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="rounded-full border border-white/10 bg-white/5 p-2 text-zinc-300 transition hover:bg-white/15 hover:text-white"
                  aria-label="GitHub"
                >
                  <svg
                    aria-hidden="true"
                    viewBox="0 0 24 24"
                    class="h-4 w-4"
                    fill="currentColor"
                  >
                    <path
                      d="M12 2C6.48 2 2 6.58 2 12.24c0 4.52 2.87 8.36 6.84 9.72.5.1.68-.22.68-.48 0-.24-.01-.87-.01-1.7-2.78.62-3.37-1.38-3.37-1.38-.45-1.18-1.11-1.5-1.11-1.5-.91-.63.07-.62.07-.62 1 .07 1.53 1.07 1.53 1.07.9 1.59 2.36 1.13 2.94.86.09-.67.35-1.13.64-1.39-2.22-.26-4.56-1.14-4.56-5.07 0-1.12.39-2.04 1.03-2.76-.1-.26-.45-1.3.1-2.7 0 0 .84-.28 2.75 1.05a9.3 9.3 0 0 1 2.5-.35c.85 0 1.71.12 2.5.35 1.9-1.33 2.74-1.05 2.74-1.05.55 1.4.2 2.44.1 2.7.64.72 1.03 1.64 1.03 2.76 0 3.94-2.35 4.8-4.58 5.06.36.33.68.97.68 1.96 0 1.41-.01 2.55-.01 2.9 0 .27.18.59.69.49 3.96-1.36 6.82-5.2 6.82-9.71C22 6.58 17.52 2 12 2Z"
                    />
                  </svg>
                </a>
                <a
                  href="https://www.linkedin.com/in/jose-luis-aguilar-sanchez-8a4270248"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="rounded-full border border-white/10 bg-white/5 p-2 text-zinc-300 transition hover:bg-white/15 hover:text-white"
                  aria-label="LinkedIn"
                >
                  <svg
                    aria-hidden="true"
                    viewBox="0 0 24 24"
                    class="h-4 w-4"
                    fill="currentColor"
                  >
                    <path
                      d="M20.45 2H3.55A1.55 1.55 0 0 0 2 3.55v16.9A1.55 1.55 0 0 0 3.55 22h16.9A1.55 1.55 0 0 0 22 20.45V3.55A1.55 1.55 0 0 0 20.45 2ZM8.09 18.66H5.42V9.84h2.67Zm-1.33-9.98a1.55 1.55 0 1 1 0-3.1 1.55 1.55 0 0 1 0 3.1Zm11.9 9.98H15.99v-4.3c0-1.03-.02-2.36-1.44-2.36-1.44 0-1.66 1.12-1.66 2.28v4.38H10.2V9.84h2.56v1.2h.04c.36-.68 1.23-1.4 2.52-1.4 2.7 0 3.2 1.78 3.2 4.1Z"
                    />
                  </svg>
                </a>
              </div>
              <div class="hidden items-center gap-2 rounded-full border border-white/10 bg-white/5 p-1 text-[11px] uppercase tracking-[0.2em] text-zinc-400 md:flex">
                <button
                  type="button"
                  class="rounded-full px-3 py-1 transition hover:text-white"
                  data-lang-switch="es"
                >
                  ES
                </button>
                <button
                  type="button"
                  class="rounded-full px-3 py-1 transition hover:text-white"
                  data-lang-switch="en"
                >
                  EN
                </button>
              </div>
              <a
                href="#contact"
                class="rounded-xl border border-white/15 bg-white/10 px-3 py-2 text-xs text-zinc-200 transition hover:bg-white/20"
              >
                <span data-lang="es">Hablemos</span>
                <span data-lang="en">Let's talk</span>
              </a>
            </div>
          </nav>
        </div>
      </div>
    </header>

    <main id="top" class="mx-auto max-w-6xl px-6 pt-32 md:pt-36">
      <slot />
    </main>

    <footer class="mx-auto max-w-6xl px-6 pb-12 pt-16 text-xs text-zinc-500">
      <div class="flex flex-col gap-2 md:flex-row md:items-center md:justify-between">
        <span>© {new Date().getFullYear()} Jose Luis</span>
        <span>
          <span data-lang="es">Hecho en Espa&ntilde;a - Disponible remoto</span>
          <span data-lang="en">Based in Spain - Remote friendly</span>
        </span>
      </div>
    </footer>

    <script is:inline>
      (() => {
        const supported = ["es", "en"];
        const stored = localStorage.getItem("lang");
        const browser = navigator.language ? navigator.language.slice(0, 2) : "en";
        const lang = supported.includes(stored)
          ? stored
          : supported.includes(browser)
            ? browser
            : "en";
        const setLang = (value) => {
          if (!supported.includes(value)) return;
          localStorage.setItem("lang", value);
          document.documentElement.setAttribute("data-lang", value);
          document.documentElement.setAttribute("lang", value);
        };
        setLang(lang);
        document.querySelectorAll("[data-lang-switch]").forEach((button) => {
          button.addEventListener("click", () => {
            setLang(button.getAttribute("data-lang-switch"));
          });
        });

        const nav = document.querySelector("[data-nav]");
        const hero = document.querySelector("main > section");
        if (!nav || !hero) return;
        const updateNav = () => {
          const threshold = hero.offsetTop + hero.offsetHeight - 24;
          if (window.scrollY >= threshold) {
            nav.classList.add("opacity-100", "translate-y-0", "pointer-events-auto");
            nav.classList.remove("opacity-0", "-translate-y-2", "pointer-events-none");
          } else {
            nav.classList.add("opacity-0", "-translate-y-2", "pointer-events-none");
            nav.classList.remove("opacity-100", "translate-y-0", "pointer-events-auto");
          }
        };
        updateNav();
        window.addEventListener("scroll", updateNav, { passive: true });
      })();
    </script>
  </body>
</html>
